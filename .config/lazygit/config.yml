# https://github.com/jesseduffield/lazygit/blob/master/docs/configuration.md
# yaml-language-server: $schema=https://raw.githubusercontent.com/jesseduffield/lazygit/master/schema/config.json
git:
  pagers:
    - colorArg: always
      pager: >
        delta --dark
        --paging=never
        --line-numbers
        --hyperlinks
        --hyperlinks-file-link-format="lazygit-edit://{path}:{line}"

  autoForwardBranches: none

quitOnTopLevelReturn: true

os:
  shellFunctionsFile: ~/.config/lazygit/.shell_startup_file

gui:
  theme:
    selectedLineBgColor:
      - reverse

customCommands:
  # --- Finish Release (Dynamic: Reads prefix from git config) ---
  - key: "I" # Shift + i
    context: "localBranches"
    description: "Finish release (Interactive)"
    output: terminal
    command: >
      BRANCH_NAME="{{.SelectedLocalBranch.Name}}";
      VERSION="${BRANCH_NAME#release/}";
      TAG_PREFIX=$(git config --get gitflow.prefix.versiontag);
      MSG_FILE=$(mktemp);
      nvim "$MSG_FILE";
      git flow release finish -m "$(cat "$MSG_FILE")" "${TAG_PREFIX}${VERSION}";
      rm "$MSG_FILE";

  # --- Finish Hotfix (Dynamic: Reads prefix from git config) ---
  - key: "H" # Shift + h
    context: "localBranches"
    description: "Finish hotfix (Interactive)"
    output: terminal
    command: >
      BRANCH_NAME="{{.SelectedLocalBranch.Name}}";
      VERSION="${BRANCH_NAME#hotfix/}";
      TAG_PREFIX=$(git config --get gitflow.prefix.versiontag);
      MSG_FILE=$(mktemp);
      nvim "$MSG_FILE";
      git flow hotfix finish -m "$(cat "$MSG_FILE")" "${TAG_PREFIX}${VERSION}";
      rm "$MSG_FILE";

  # --- Sync (Push Main and Tags) ---
  - key: "S" # Shift + s
    context: "localBranches"
    description: "Sync (Push main with tags)"
    loadingText: "Pushing to origin..."
    output: terminal
    command: >
      git push origin main;
      git push origin --tags;
